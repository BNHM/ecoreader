function populateAuthors(){theUrl="rest/authors/list";$.getJSON(theUrl,function(a){var b="";b+="<option value=''>Select an author ...</option>",$.each(a.authors,function(a,c){b+="<option value='"+c+"'>"+c+"</option>"}),$("#authors").html(b),$(".combobox").combobox()}).fail(function(a,b){showMessage("timeout"==b?"Timed out waiting for response! Try again later or reduce the number of graphs you are querying. If the problem persists, contact the System Administrator.":"Error completing request!")})}function populateVolumes(){theUrl="rest/volumes/",$.getJSON(theUrl+"?author="+$("#authors").val()+"&"+$("form").serialize(),function(a){var b,c="<ul class='list-group'>{list}</ul>",d="<h4 class='list-group-heading'>{vol_title}</h4>",e="<li class='list-group-item'>{section_title}{view_section}</li>",f="",g=" [<a href='#' class='view_section' data-id='{section_id}'>view section</a>]";$.each(a.volumes,function(a,h){b=d.replace("{vol_title}",h.title),$.each(h.sections,function(a,c){b+=e.replace("{section_title}",c.title),b=c.isScanned?b.replace("{view_section}",g.replace("{section_id}",c.section_id)):b.replace("{view_section}","")}),f+=c.replace("{list}",b)}),f?($("#results").html(f).show(),$(".view_section").click(function(){showSection(this.dataset.id)})):$("#results").html("</b>No results to show for your search!</b>").show()}).fail(function(a,b){showMessage("timeout"==b?"Timed out waiting for response! Try again later or reduce the number of graphs you are querying. If the problem persists, contact the System Administrator.":"Error completing request!")})}function getPage(){return parseInt(sessionStorage.getItem("pageIndex"))}function gotoPage(a){return sessionStorage.setItem("pageIndex",a),a}function nextPage(){var a=getPage()+1;return sessionStorage.setItem("pageIndex",a),a}function prevPage(){var a=getPage()-1;return sessionStorage.setItem("pageIndex",a),a}function readSection(a,b){$.fancybox.open($.fancybox.group,{nextEffect:"fade",prevEffect:"fade",fitToView:!1,autoSize:!1,beforeLoad:function(){this.href=this.big},afterLoad:function(a,c){null==c?this.index=b:b=a.index,this.href=this.group[b].big},beforeShow:function(){$("#content").css({"overflow-x":"hidden"})},afterClose:function(){showSectionFancybox(a,b,this.group),$("#content").css({"overflow-x":"visable"})}})}function showSectionFancybox(a,b,c){$.fancybox.open(c,{padding:[15,190,15,15],nextEffect:"fade",prevEffect:"fade",autoSize:!0,helpers:{thumbs:{width:75,height:103,source:function(a){return a.thumb}}},afterLoad:function(a,c){null==c?(null==b&&(b=0),this.index=b):b=a.index,sessionStorage.setItem("pageIndex",b),this.href=this.group[b].href},beforeShow:function(){var a=$('<div class="fancybox-sidebar"><div class="fancybox-sidebar-container"></div></div>');this.skin.append(a);var b="<div class='fancybox-img-download'><p><a href='"+this.big+"' download='image.png'>Download Image</a></p>";this.group.length>1&&(b+="<div class='fancybox-page-nav'><a href='#' class='btn btn-default' onClick='$.fancybox.jumpto(gotoPage(0));' style='float:left'>|<</a><a href='#' class='btn btn-default' onClick='$.fancybox.jumpto(prevPage());' style='float:left'><</a><a href='#' class='btn btn-default' onClick='$.fancybox.jumpto(nextPage());' style='float:left'>></a><a href='#' class='btn btn-default' style='float:left;' onClick='$.fancybox.jumpto(gotoPage($.fancybox.group.length - 1));'>>|</a></div>"),$(".fancybox-tmp .fancybox-sidebar-container").html(b),$(".fancybox-img-download a#1200").attr("href",this.big)},onUpdate:function(){$(".fancybox-sidebar").height(this.inner.height())},afterShow:function(){$("<a id='img_link' href='#'></a>").insertAfter(".fancybox-prev"),$("#img_link").click({href:this.big},function(b){!function(b){$.fancybox.close(),readSection(a,b)}($.fancybox.current.index)})}})}function showSection(a){!function(a){$.getJSON("rest/sections/"+a,function(b){showSectionFancybox(a,0,b.pages)}).fail(function(a,b){showMessage("timeout"==b?"Timed out waiting for response! Try again later or reduce the number of graphs you are querying. If the problem persists, contact the System Administrator.":"Error completing request!")})}(a)}function showMessage(a){$("#alerts").append('<div class="alert"><button type="button" class="close" data-dismiss="alert">&times;</button>'+a+"</div>")}function toggleQuery(){$(".toggle-content#query_toggle").is(":hidden")?($(".toggle-content#query_toggle").show(400),$("#toggle_query button").html("-")):($(".toggle-content#query_toggle").hide(400),$("#toggle_query button").html("+"))}
//# sourceMappingURL=maps/ecoreader.map